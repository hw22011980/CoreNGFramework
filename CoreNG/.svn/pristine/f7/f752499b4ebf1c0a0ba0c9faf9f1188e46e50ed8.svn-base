<div class="container text-center margin-left-info pt-5">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb w-75">
      <li class="breadcrumb-item"><a class="header" [routerLink]="['/keys']">KEYS (DLMS Association)</a></li>
      <li class="breadcrumb-item active" aria-current="page" *ngIf="dlmsAssociation!=null">{{dlmsAssociationId}}</li>
    </ol>
  </nav>

  <div class="card mb-5 rounded w-75" *ngIf="dlmsAssociation!=null">
    <div class="card-header text-left">
      DLMS ASSOCIATION INFORMATION
    </div>

    <div class="card-body">
      <div class="row top-buffer">
        <div class="col-4 text-right">DLMS Association Id</div>
        <div class="col-8 text-left"><b>{{dlmsAssociation.id}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Description</div>
        <div class="col-8 text-left"><b>{{dlmsAssociation.description}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Client Id</div>
        <div class="col-8 text-left"><b>{{dlmsAssociation.clientId}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Authentication Method</div>
        <div class="col-8 text-left"><b>{{dlmsAssociation.authenticationMethod_Description}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Application Context</div>
        <div class="col-8 text-left"><b>{{dlmsAssociation.applicationContext_Description}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Server Address</div>
        <div class="col-8 text-left"> <b>{{dlmsAssociation.serverAddress}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">APDU Max</div>
        <div class="col-8 text-left"> <b>{{dlmsAssociation.apduMax}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Device Type</div>
        <div class="col-8 text-left">
          <b>{{ dlmsAssociation.deviceTypeName == "0" ? "Not Provided" :  dlmsAssociation.deviceTypeName}}</b></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Pre-established</div>
        <div class="col-8 text-left"> <span class="badge status-padding"
            [ngClass]="{'badge-danger': dlmsAssociation.preEstablished === false, 'badge-success': dlmsAssociation.preEstablished === true}">
            {{ dlmsAssociation.preEstablished ? "True" :"False"}}
          </span></div>
      </div>
      <div class="row top-buffer">
        <div class="col-4 text-right">Status</div>
        <div class="col-8 text-left"> <span class="badge status-padding"
            [ngClass]="{'badge-danger': dlmsAssociation.inActive === false, 'badge-success': dlmsAssociation.inActive === true}">
            {{ dlmsAssociation.inActive ? "Active" :"Inactive"  }}
          </span>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="!keycontents?.length; else showTable">
    <h3>No Keys found </h3>
    <hr>
  </div>
  <ng-template #showTable>
    <div class="header text-left">
      DLMS ASSOCIATION - ASSOCIATED DEVICES
    </div>
    <table class="table table-striped table-hover shadow p-3 mb-5 bg-white rounded table-responsive-md w-75">
      <thead>
        <tr>
          <th>DEVICE PLANT NUMBER</th>
          <th>DLMS ASSOCIATION ID</th>
          <th>CLIENT ID</th>
          <!--<th>KEK</th>
          <th>BEK</th>
          <th>UEK</th>
          <th>AK</th>
          <th>HLS</th>
          <th>LLS</th>-->
        </tr>
      </thead>
      <tr *ngFor="let keys of pagedItems">
        <td>{{ keys.plantNumber }}</td>
        <td>{{ keys.dlmsAssociationId}}</td>
        <td>{{ keys.clientId }}</td>
        <!--<td>{{ keys.kek }}</td>
        <td>{{ keys.bek }}</td>
        <td>{{ keys.uek }}</td>
        <td>{{ keys.ak }}</td>
        <td>{{ keys.hls }}</td>
        <td>{{ keys.lls }}</td>-->
      </tr>
    </table>

    <nav>
      <ul class="pagination justify-content-center" *ngIf="pager.pages && pager.pages.length">
        <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
          <a class="page-link" (click)="setPage(1)">First</a>
        </li>
        <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
          <a class="page-link" (click)="setPage(pager.currentPage - 1)">Previous</a>
        </li>
        <li class="page-item" *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
          <a class="page-link" style="width: 45px" (click)="setPage(page)">{{page}}</a>
        </li>
        <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
          <a class="page-link" (click)="setPage(pager.currentPage + 1)">Next</a>
        </li>
        <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
          <a class="page-link" (click)="setPage(pager.totalPages)">Last</a>
        </li>
      </ul>
    </nav>
  </ng-template>

</div>