<form [formGroup]="linkFormGroup" autocomplete="off">
  <div class="container-fluid text-left">
    <div class="input-group mr-2">
      <input class="form-control" formControlName="valueText" placeholder="Search Devices" [readonly]='true' />
      <div class="input-group-append">
        <button class="btn btn-outline-secondary" [ngbPopover]="tableList" placement="bottom" type="button">
          <small>...</small>
        </button>
      </div>
    </div>
  </div>
  <hr>
  <!--hidden button to close the modal on submit and cancel-->
  <button #closeModal type="button" (click)="resetForm();" class="close" data-dismiss="modal" aria-label="Close">
  </button>

  <div class="float-right" *ngIf="!cancelDeviceLink">
    <button type="button" class="btn btn-primary m-1 btn-sm" (click)="onSave();">Save</button>
    <button type="button" class="btn btn-primary m-1 btn-sm" (click)="clickCancel();">Cancel</button>
  </div>

  <div class="float-right" *ngIf="cancelDeviceLink">
    <b class="m-1">Are you sure you want to cancel link device?</b>
    <button type="button" class="btn btn-danger m-1 btn-sm" data-dismiss="modal" (click)="resetForm();"> Yes </button>
    <button type="button" class="btn btn-outline-primary m-1 btn-sm" (click)="clickCancel();"> No </button>
  </div>
</form>

<ng-template #tableList>
  <div>
    <input type="text" #txtFind name="txtFind" class="form-control" placeholder="search key" (ngModel)="this.strFilter"
      (ngModelChange)="onFilterChange(txtFind.value);" />
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <td class="mw-7">SITE</td>
          <td class="mw-12">PLANT NUMBER</td>
          <td class="mw-13">SERIAL NUMBER</td>
          <td class="mw-11">DEVICE TYPE</td>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let device of devices" (click)="onRowSelect(device);">
          <!-- I put fix text 'No Site' because this will show default site only.-->
          <td class="mw-10">No Site</td>
          <td class="mw-17">{{ device.plantNumber}}</td>
          <td class="mw-17">{{ device.serialNumber}}</td>
          <td class="mw-11">{{ device.deviceType.deviceTypeName }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</ng-template>